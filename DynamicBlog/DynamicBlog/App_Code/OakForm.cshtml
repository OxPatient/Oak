@helper TextBox(Oak.ElementMetaData metaData)
{
    <input type="text" id="@metaData.Id" name="@metaData.Id" value="@metaData.Value" @Attributes(metaData) @Styles(metaData)/>
}

@helper Password(Oak.ElementMetaData metaData)
{
    <input type="password" id="@metaData.Id" name="@metaData.Id" value="@metaData.Value" @Attributes(metaData) @Styles(metaData)/>
}

@helper TextArea(Oak.ElementMetaData metaData)
{
    <textarea id="@metaData.Id" name="@metaData.Id" @Attributes(metaData) @Styles(metaData)>@metaData.Value</textarea>
}

@helper Label(Oak.ElementMetaData metaData)
{
    @Label(metaData, null);
}

@helper Label(Oak.ElementMetaData metaData, string text)
{
    <label for="@metaData.Id" @Attributes(metaData) @Styles(metaData)>@(text ?? @metaData.Id)</label>
}

@helper Date(Oak.ElementMetaData metaData)
{
    <input type="text" id="@metaData.Id" name="@metaData.Id" value="@DateFor(metaData)" @Attributes(metaData) @Styles(metaData)/>
}

@helper Attributes(Oak.ElementMetaData metaData)
{
    foreach (var attribute in metaData.Attributes) { @attribute.Key<text>="</text>@attribute.Value<text>"</text> }
}

@helper Styles(Oak.ElementMetaData metaData)
{
    if (metaData.Styles.Count != 0)
    {
        <text>style="</text>foreach (var attribute in metaData.Styles) { @attribute.Key<text>:</text>@attribute.Value<text>;</text> }<text>"</text>
    }
}

@functions
{
    static string DateFor(Oak.ElementMetaData metaData) 
    {
        var dateTime = DateTime.Today;
        var dateAsString = "";
        
        if (DateTime.TryParse(metaData.Value.ToString(), out dateTime))
        {
            if (dateTime.Date == dateTime) dateAsString = dateTime.ToShortDateString();
            else dateAsString = dateTime.ToString();
        }

        return dateAsString;
    }
    
    static bool IsAttribute(string key) 
    {
        return Attributes().Contains(key) || key.StartsWith("data-");
    }
    
    static string[] Attributes()
    {
        return new[]
        {
            "id"
        };
    }
}

@*
Todo: labels, radio buttons, drop down lists, password input, anchor tags, etc
*@
